<!DOCTYPE html>
<html>
  <head>
    <title>Weight Chart</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="bower_components/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" media="screen">
  </head>
  <body>

	    <div class="container">

	      <h1>Gym Weight Lifting Chart</h1>

		  <form id="exercise-values">
			<ul>
				<li>
					<label for="exercise-name">Exercise Name</label>
					<input type="text" name="exercise-name" id="exercise-name" class="watch-for-change" size="100">
				</li>
				<li>
					<label for="one-rep-max">One Rep Max</label>
					<input type="text" name="one-rep-max" id="one-rep-max" class="watch-for-change">
				</li>
				<li>
					<label for="machine-weight">Machine Weight</label>
					<input type="text" name="machine-weight" id="machine-weight" class="watch-for-change">

					<input type="checkbox" name="split" id="split" class="watch-for-change extra-left-padding">
					<label for="dumbbell">Split</label>
				</li>
			</ul>
			<table id="chart" class="table table-bordered table-striped">
				<tr class="header">
					<th>Repetitions</th>
					<th>S.O.F.</th>
					<th>Weight to Add</th>
					<th>Split</th>
				</tr>
		    </table>
		
			<input type="button" value="Add Exercise" class="btn btn-primary" id="add">
		  </form>
		
		  <h2>Today's Workout</h2>
		  <table id="todays-workout" class="table table-bordered table-striped">
			<thead>
				<tr class="header">
					<th>Repetitions</th>
					<th>S.O.F.</th>
					<th>Weight to Add</th>
					<th>Split</th>
				</tr>
			</thead>
			<tbody>
			</tbody>
		  </table>
	    </div> <!-- /container -->
	<style>
	  table {margin-top: 20px;}
	  input#split {margin-left: 20px;}
	  tr.selectable.selected td {background-color: #F0E295 !important;}
	  form ul {list-style-type: none;padding-left:0px;margin-top: 30px}
	  form ul li { height: 40px;margin-left:0px;}
	  form ul li label {width: 130px;}
	</style>
	
    <script src="bower_components/jquery/jquery.min.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
	<script>
		$( document ).ready(function() {
			$.each([ 15, 12, 10, 8 ], function( repIndex, repValue ) {
				$.each([ 5, 4, 3, 2, 1, 0 ], function( sofIndex, sofValue ) {
					$('table#chart > tbody').append('<tr class="selectable"><td>' + repValue + '</td><td>' + sofValue + '</td><td id="' + repValue + '-' + sofValue + '-weight"></td><td id="' + repValue + '-' + sofValue + '-split"></td></tr>');
			    });
			});

		    $('.selectable').click(function() {
				$( this ).toggleClass('selected');
			});
		});
	
		$('input#add').click(function () {
			$('#todays-workout > tbody').append('<tr><td colspan="4" class="title">'+$('#exercise-name').val() + '</td></tr>');
			$('.selected').each(function(i, obj) {
				$( obj ).toggleClass('selected');
				var row = obj.cloneNode();
				console.log(row);
				$('#todays-workout > tbody').append(row);
				$('#todays-workout tbody td').removeAttr('id');
			});
			$('#exercise-name').val('');
			$('#one-rep-max').val('');
			$('#machine-weight').val('');
		});
		
		$(".watch-for-change" ).change(function() {
			var oneRepMax = $('#one-rep-max').val();
			var machineWeight = $('#machine-weight').val();
			
			$.each([ 15, 12, 10, 8 ], function( repIndex, repValue ) {
				$.each([ 5, 4, 3, 2, 1, 0 ], function( sofIndex, sofValue ) {
					var targetReps = repValue + sofValue;
					var pctOfMax = .5;
				
					if (targetReps >= 2 && targetReps <= 3)
					{
					   pctOfMax = .95;
					}
					else if (targetReps >= 4 && targetReps <= 5)
					{
					   pctOfMax = .9;
					}
					else if (targetReps >= 6 && targetReps <= 7)
					{
					   pctOfMax = .85;
					}
					else if (targetReps >= 8 && targetReps <= 9)
					{
					   pctOfMax = .8;
					}
					else if (targetReps >= 10 && targetReps <= 11)
					{
					   pctOfMax = .75;
					}
					else if (targetReps >= 12 && targetReps <= 13)
					{
					   pctOfMax = .7;
					}
					else if (targetReps >= 14 && targetReps <= 15)
					{
					   pctOfMax = .65;
					}
					else if (targetReps >= 16 && targetReps <= 17)
					{
					   pctOfMax = .6;
					}
					else if (targetReps >= 18 && targetReps <= 19)
					{
					   pctOfMax = .55;
					}
					else 
					{
					   pctOfMax = .5;
					}
					weightKey = "#" + repValue + "-" + sofValue + "-weight";
					weightSplit = "#" + repValue + "-" + sofValue + "-split";
					weightToLift = (pctOfMax * oneRepMax).toFixed();
					if (machineWeight > 0) {
						weightToLift = weightToLift - machineWeight;
					}
					$(weightKey).text(weightToLift);
					if ($('#split').is(':checked')) {
						$(weightSplit).text(weightToLift / 2);
					} else {
						$(weightSplit).text('');
					}
			    });
		  
			});
		});
	
	
	</script>
  </body>
</html>
